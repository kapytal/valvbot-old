{
  "meta": {
    "$_POST": [
      {
        "type": "text",
        "options": {
          "rules": {}
        },
        "name": "channel"
      },
      {
        "type": "object",
        "options": {
          "rules": {
            "core:required": {}
          }
        },
        "name": "message"
      }
    ]
  },
  "exec": {
    "steps": {
      "name": "",
      "module": "core",
      "action": "condition",
      "options": {
        "if": "{{$_POST.channel.contains('telegram')}}",
        "then": {
          "steps": {
            "name": "telegramMessage",
            "module": "api",
            "action": "send",
            "options": {
              "passErrors": false,
              "url": "https://api.telegram.org/bot2100613863:AAGlB8mM7f1ZSBjAkTKMEa4UN0ELxU9YG14/sendMessage",
              "method": "POST",
              "dataType": "json",
              "data": {
                "chat_id": 322739757,
                "parse_mode": "MarkdownV2",
                "text": "{{$_POST.message}}"
              },
              "schema": [
                {
                  "type": "object",
                  "name": "data",
                  "sub": [
                    {
                      "type": "boolean",
                      "name": "ok"
                    },
                    {
                      "type": "object",
                      "name": "result",
                      "sub": [
                        {
                          "type": "number",
                          "name": "message_id"
                        },
                        {
                          "type": "object",
                          "name": "from",
                          "sub": [
                            {
                              "type": "number",
                              "name": "id"
                            },
                            {
                              "type": "boolean",
                              "name": "is_bot"
                            },
                            {
                              "type": "text",
                              "name": "first_name"
                            },
                            {
                              "type": "text",
                              "name": "username"
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "name": "chat",
                          "sub": [
                            {
                              "type": "number",
                              "name": "id"
                            },
                            {
                              "type": "text",
                              "name": "first_name"
                            },
                            {
                              "type": "text",
                              "name": "last_name"
                            },
                            {
                              "type": "text",
                              "name": "username"
                            },
                            {
                              "type": "text",
                              "name": "type"
                            }
                          ]
                        },
                        {
                          "type": "number",
                          "name": "date"
                        },
                        {
                          "type": "text",
                          "name": "text"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "object",
                  "name": "headers",
                  "sub": [
                    {
                      "type": "text",
                      "name": "access-control-allow-methods"
                    },
                    {
                      "type": "text",
                      "name": "access-control-allow-origin"
                    },
                    {
                      "type": "text",
                      "name": "access-control-expose-headers"
                    },
                    {
                      "type": "text",
                      "name": "content-length"
                    },
                    {
                      "type": "text",
                      "name": "content-type"
                    },
                    {
                      "type": "text",
                      "name": "date"
                    },
                    {
                      "type": "text",
                      "name": "server"
                    },
                    {
                      "type": "text",
                      "name": "strict-transport-security"
                    }
                  ]
                }
              ]
            },
            "meta": [
              {
                "type": "object",
                "name": "data",
                "sub": [
                  {
                    "type": "boolean",
                    "name": "ok"
                  },
                  {
                    "type": "object",
                    "name": "result",
                    "sub": [
                      {
                        "type": "number",
                        "name": "message_id"
                      },
                      {
                        "type": "object",
                        "name": "from",
                        "sub": [
                          {
                            "type": "number",
                            "name": "id"
                          },
                          {
                            "type": "boolean",
                            "name": "is_bot"
                          },
                          {
                            "type": "text",
                            "name": "first_name"
                          },
                          {
                            "type": "text",
                            "name": "username"
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "name": "chat",
                        "sub": [
                          {
                            "type": "number",
                            "name": "id"
                          },
                          {
                            "type": "text",
                            "name": "first_name"
                          },
                          {
                            "type": "text",
                            "name": "last_name"
                          },
                          {
                            "type": "text",
                            "name": "username"
                          },
                          {
                            "type": "text",
                            "name": "type"
                          }
                        ]
                      },
                      {
                        "type": "number",
                        "name": "date"
                      },
                      {
                        "type": "text",
                        "name": "text"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "object",
                "name": "headers",
                "sub": [
                  {
                    "type": "text",
                    "name": "access-control-allow-methods"
                  },
                  {
                    "type": "text",
                    "name": "access-control-allow-origin"
                  },
                  {
                    "type": "text",
                    "name": "access-control-expose-headers"
                  },
                  {
                    "type": "text",
                    "name": "content-length"
                  },
                  {
                    "type": "text",
                    "name": "content-type"
                  },
                  {
                    "type": "text",
                    "name": "date"
                  },
                  {
                    "type": "text",
                    "name": "server"
                  },
                  {
                    "type": "text",
                    "name": "strict-transport-security"
                  }
                ]
              }
            ],
            "outputType": "object",
            "output": true
          }
        },
        "else": {
          "steps": {
            "name": "api",
            "module": "api",
            "action": "send",
            "options": {
              "url": "https://discord.com/api/v10/channels/852185817605996554/messages",
              "method": "POST",
              "dataType": "json",
              "schema": [
                {
                  "type": "array",
                  "name": "data"
                },
                {
                  "type": "object",
                  "name": "headers"
                }
              ],
              "headers": {
                "Authorization": "Bot MTA0ODc1NjAxMDMzODI0MjYyMQ.GWPTNu.fW4NEG0cXEpmWQ72B-Sj9wZHcY4yfbZPPp8fyo"
              },
              "data": {
                "content": "{{$_POST.message}}"
              }
            },
            "output": true,
            "meta": [
              {
                "type": "array",
                "name": "data"
              },
              {
                "type": "object",
                "name": "headers"
              }
            ],
            "outputType": "object"
          }
        }
      },
      "outputType": "boolean"
    }
  }
}